let text0="Word. word word word Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor.";const article0={title:"first article",date:[1985,12,10],image:"img/guitarGuyCompressed.jpg",alt:"this is a black and white picture of an average looking blond guy looking down while holding a guitar in front of him but a little to the side, and the picture is taken from the front",categories:["milestone","plans"],content:text0};let text1="This is also a test! Vulputate eget, arcu. In enim justo, rhoncus ut. Word";const article1={title:"second it is!",date:[2004,8,6],image:"img/neonSignCompressed.jpg",alt:"a wide lens picture of a neon sign surrounded by complete darkness that spells Franks, open late, and has a big arrow attached that points to the building",categories:["lighting","storyboard"],content:text1};let text2="The blue pill will grant you unfathomable power, the red will make you invisible. Quis, feugiat a, tellus. Phasellus viverra nulla ut. Word";const article2={title:"third. will you take the blue pill or the red pill?",date:[2016,1,1],image:"img/plantCompressed.jpg",alt:"this is a picture of three plants with big dark greenish leafs sitting in a orange pot",categories:["plans","summary"],content:text2};let text3="Word. Word What you're reading is text, and this is a test. Metus varius laoreet. Quisque rutrum. Aenean imperdiet.";const article3={title:"fourth article",date:[2021,11,23],image:"img/yachtCompressed.jpg",alt:"this is a picture of a yacht taken from on said yacht, with a narrow view of the sea, sky, and very saturated and fun colors",categories:["big-fix"],content:text3},articles=[article0,article1,article2,article3,article1,article0,article3,article1];var searchResults,columns;function resetSearchResults(){searchResults=[];for(let i=0;i<articles.length;i++)obj={id:i,relevence:0,date:[]},searchResults.push(obj)}function searchData(searchTerm){resetSearchResults();let splicedTerms=searchTerm.toLowerCase().split(/[\s,\-_"#%()+*^|><@$&=~?!/]+/),searchTerms=[];for(let i=0;i<splicedTerms.length;i++)""!=splicedTerms[i]&&searchTerms.push(splicedTerms[i]);searchTerms.forEach(term=>{for(let i=0;i<articles.length;i++){let content=articles[i].content.toLowerCase().split(/[\s,\-_"#%()+*^|><@$&=~?!/]+/),title=articles[i].title.toLowerCase().split(/[\s,\-_"#%()+*^|><@$&=~?!/]+/),categories=articles[i].categories.map(element=>element.toLowerCase()),date=articles[i].date;for(let t=0;t<content.length;t++)term==content[t]&&(searchResults[i].relevence++,searchResults[i].date=date);for(let t=0;t<title.length;t++)term==title[t]&&(searchResults[i].relevence++,searchResults[i].date=date);for(let t=0;t<categories.length;t++)term==categories[t]&&(searchResults[i].relevence++,searchResults[i].date=date);for(let t=0;t<date.length;t++)term==date[t]&&(searchResults[i].relevence++,searchResults[i].date=date)}})}function sortByRelevence(){searchResults=searchResults.sort((a,b)=>b.relevence-a.relevence)}function sortByNewest(){for(let i=0;i<searchResults.length;i++){let stringDate=searchResults[i].date[0];for(let t=1;t<searchResults[i].date.length;t++)searchResults[i].date[t]>9?stringDate+=String(searchResults[i].date[t]):stringDate+="0"+String(searchResults[i].date[t]);searchResults[i].date=stringDate}searchResults=searchResults.sort((a,b)=>b.date-a.date);for(let i=0;i<searchResults.length;i++){let arrayDate=new Array(1).fill(parseInt(searchResults[i].date.substr(0,4)));arrayDate.push(parseInt(searchResults[i].date.substr(4,2))),arrayDate.push(parseInt(searchResults[i].date.substr(6,2))),searchResults[i].date=arrayDate}}function sortByOldest(){for(let i=0;i<searchResults.length;i++){let stringDate=searchResults[i].date[0];for(let t=1;t<searchResults[i].date.length;t++)searchResults[i].date[t]>9?stringDate+=String(searchResults[i].date[t]):stringDate+="0"+String(searchResults[i].date[t]);searchResults[i].date=stringDate}searchResults=searchResults.sort((a,b)=>a.date-b.date);for(let i=0;i<searchResults.length;i++){let arrayDate=new Array(1).fill(parseInt(searchResults[i].date.substr(0,4)));arrayDate.push(parseInt(searchResults[i].date.substr(4,2))),arrayDate.push(parseInt(searchResults[i].date.substr(6,2))),searchResults[i].date=arrayDate}}function deleteIrrelevant(){for(;searchResults[searchResults.length-1].relevence<1;)searchResults.pop()}function generateMasonry(columns,articles){const masonry=document.querySelector(".masonry");masonry.innerHTML="";let columnWrappers={};for(let i=0;i<columns;i++)columnWrappers[`column${i}`]=[];for(let i=0;i<articles.length;i++){const column=i%columns;columnWrappers[`column${column}`].push(articles[i])}for(let i=0;i<columns;i++){let column=document.createElement("div"),columnArticles;column.classList.add("column"),columnWrappers[`column${i}`].forEach(article=>{let masonryItem=document.createElement("div");masonryItem.classList.add("masonryItem");let articleImgDiv=document.createElement("div");articleImgDiv.classList.add("articleImgDiv");let articleImg=document.createElement("img");articleImg.classList.add("articleImg"),articleImg.src=article.image,articleImg.alt=article.alt;let articleText=document.createElement("div");articleText.classList.add("articleText");let articleDate=document.createElement("p");articleDate.classList.add("articleDate");let stringDate=new Array(1).fill(String(article.date[0]));for(let t=1;t<article.date.length;t++)article.date[t]>9?stringDate.push(String(article.date[t])):stringDate.push("0"+String(article.date[t]));articleDate.innerHTML=stringDate.join("-");let articleTitle=document.createElement("p");articleTitle.classList.add("articleTitle"),articleTitle.innerText=article.title.toUpperCase();let articleContent=document.createElement("p");articleContent.classList.add("articleContent"),articleContent.innerText=article.content[0].toUpperCase()+article.content.substr(1).toLowerCase();let articleCategories=document.createElement("p");articleCategories.classList.add("articleCategories"),articleCategories.innerHTML=article.categories.map(element=>element.toLowerCase()).join(", "),articleImgDiv.appendChild(articleImg),masonryItem.appendChild(articleImgDiv),articleText.appendChild(articleDate),articleText.appendChild(articleTitle),articleText.appendChild(articleContent),articleText.appendChild(articleCategories),masonryItem.appendChild(articleText),column.appendChild(masonryItem)}),masonry.appendChild(column)}}var filteredArticles=articles;function setColumns(){let screenWidth=window.innerWidth,firstBound=600,secondBound=900,thirdBound=1100,fourthBound=1300;generateMasonry(columns=screenWidth<=600?1:screenWidth>600&&screenWidth<=900?2:screenWidth>900&&screenWidth<=1100?3:screenWidth>1100&&screenWidth<=1300?4:Math.ceil(screenWidth/300),filteredArticles)}setColumns(),generateMasonry(columns,filteredArticles),window.addEventListener("resize",setColumns);const searchBar=document.getElementById("searchBar");searchBar.addEventListener("keypress",e=>{"Enter"==e.key&&updateSearch()});const searchButton=document.getElementById("searchButton");function updateSearch(){let input=document.getElementById("searchBar").value;if(""!=input)if(resetSearchResults(),searchData(String(input)),sortByRelevence(),0==searchResults[0].relevence)generateMasonry(columns,[]);else{deleteIrrelevant(),filteredArticles=[];for(let i=0;i<searchResults.length;i++)filteredArticles.push(articles[searchResults[i].id]);generateMasonry(columns,filteredArticles)}else generateMasonry(columns,articles)}searchButton.addEventListener("click",updateSearch);